<div *ngIf="agenda">
  <h2>
    {{ agenda && agenda.id ? "Agenda NÂ° " + agenda.id : "Nueva Agenda" }}
  </h2>

  <form #form="ngForm">
    <div class="form-group inline">
      <label for="date">Fecha:</label>
      <ngb-datepicker name="date" [(ngModel)]="agendaDate" [startDate]="agendaDate"></ngb-datepicker>
    </div>

    <div class="form-group">
      <label for="paciente">Paciente:</label>
      <br />
      <input
        [(ngModel)]="agenda.paciente"
        name="paciente"
        placeholder="Paciente"
        class="form-control"
        required
        [ngbTypeahead]="searchPaciente"
        [editable]="false"
        [resultFormatter]="resultFormat"
        [inputFormatter]="inputFormat"
      />
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th>#</th>
            <th>Turno</th>
            <th>Audiencia</th>
            <th>
              <button (click)="addPerformance()" class="btn btn-success">
                Agregar
              </button>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let performance of agenda.performances; index as i">
            <td>{{ i }}</td>
            <td>
              <input
                [(ngModel)]="performance.turno"
                name="performanceTurno{{i}}"
                placeholder="Turno"
                class="form-control"
                required
                [ngbTypeahead]="searchTurno"
                [editable]="false"
                [resultFormatter]="resultFormat"
                [inputFormatter]="inputFormat"
              />
            </td>
            <td>
              <input
                name="audience{{i}}"
                [(ngModel)]="performance.audience"
                class="form-control"
              />
            </td>
            <td>
              <button
                (click)="removePerformance(performance)"
                class="btn btn-default"
              >
                <i class="fa fa-remove"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <button (click)="goBack()" class="btn btn-danger">AtrÃ¡s</button>
    <button (click)="save()" [disabled]="!form.valid" class="btn btn-success">
      Guardar
    </button>
  </form>
</div>