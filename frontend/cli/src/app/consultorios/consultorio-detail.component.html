    <div class="container mt-4" *ngIf="consultorio">
      <div class="card modern-card">
        <!-- HEADER MODERNO -->
        <div class="card-header">
          <div class="header-content">
            <div class="header-icon">
              <i class="fas fa-door-open"></i>
            </div>
            <div class="header-text">
              <h1>{{ esNuevo ? 'Nuevo Consultorio' : 'Consultorio #' + consultorio.numero }}</h1>
              <p>{{ esNuevo ? 'Configure un nuevo consultorio' : consultorio.nombre }}</p>
            </div>
          </div>
        </div>

        <!-- BODY DEL CARD -->
        <div class="card-body">
          <!-- MODO VISTA -->
          <div *ngIf="!modoEdicion">
            <div class="info-grid">
              <div class="info-item">
                <div class="info-label">
                  <span class="info-icon" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">üî¢</span>
                  N√∫mero
                </div>
                <div class="info-value">
                  {{ consultorio.numero }}
                </div>
              </div>

              <div class="info-item">
                <div class="info-label">
                  <span class="info-icon" style="background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);">üè∑Ô∏è</span>
                  Nombre
                </div>
                <div class="info-value">
                  {{ consultorio.nombre }}
                </div>
              </div>

              <div class="info-item">
                <div class="info-label">
                  <span class="info-icon" style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);">üè•</span>
                  Centro de Atenci√≥n
                </div>
                <div class="info-value">
                  {{ consultorio.centroAtencion?.nombre || 'Sin centro asignado' }}
                </div>
              </div>
            </div>
          </div>

          <!-- MODO EDICI√ìN -->
          <form *ngIf="modoEdicion" #form="ngForm" (ngSubmit)="save()">
            <div class="row">
              <!-- N√∫mero -->
              <div class="col-md-6">
                <div class="form-group-modern">
                  <label class="form-label-modern">
                    <span class="form-icon" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">üî¢</span>
                    N√∫mero del Consultorio
                  </label>
                  <input 
                    type="number" 
                    name="numero" 
                    required 
                    placeholder="N√∫mero del consultorio" 
                    class="form-control form-control-modern"
                    [(ngModel)]="consultorio.numero" 
                    #numero="ngModel" 
                    min="1"
                  />
                  <div *ngIf="numero.invalid && (numero.dirty || numero.touched)" class="form-help text-danger">
                    <div *ngIf="numero.errors?.['required']">
                      El n√∫mero del consultorio es requerido
                    </div>
                    <div *ngIf="numero.errors?.['min']">
                      El n√∫mero debe ser mayor o igual a 1
                    </div>
                  </div>
                </div>
              </div>

              <!-- Nombre -->
              <div class="col-md-6">
                <div class="form-group-modern">
                  <label class="form-label-modern">
                    <span class="form-icon" style="background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);">üè∑Ô∏è</span>
                    Nombre del Consultorio
                  </label>
                  <input 
                    name="nombre" 
                    required 
                    placeholder="Nombre del consultorio" 
                    class="form-control form-control-modern" 
                    [(ngModel)]="consultorio.nombre"
                    #nombre="ngModel"
                  />
                  <div *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" class="form-help text-danger">
                    <div *ngIf="nombre.errors?.['required']">
                      El nombre del consultorio es requerido
                    </div>
                  </div>
                </div>
              </div>

              <!-- Centro de Atenci√≥n -->
              <div class="col-md-12">
                <div class="form-group-modern">
                  <label class="form-label-modern">
                    <span class="form-icon" style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);">üè•</span>
                    Centro de Atenci√≥n
                  </label>
                  <input
                    type="text"
                    class="form-control form-control-modern"
                    name="centroSearch"
                    placeholder="Buscar centro..."
                    [(ngModel)]="centroSearch"
                    [ngbTypeahead]="searchCentros"
                    [inputFormatter]="formatCentro"
                    [resultFormatter]="formatCentro"
                    (selectItem)="onSelectCentro($event)"
                  />
                  <div class="form-help">
                    Centro de atenci√≥n al que pertenece este consultorio
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>

        <!-- FOOTER DEL CARD -->
        <div class="card-footer">
          <div class="d-flex gap-2 flex-wrap">
            <!-- Botones en modo vista -->
            <ng-container *ngIf="!modoEdicion">
              <button type="button" class="btn btn-modern btn-back" (click)="goBack()">
                ‚Üê Volver
              </button>
              <button type="button" class="btn btn-modern btn-edit" (click)="activarEdicion()">
                ‚úèÔ∏è Editar
              </button>
              <button 
                type="button" 
                class="btn btn-modern btn-delete ms-auto" 
                (click)="remove()"
                *ngIf="consultorio.id && consultorio.id !== 0"
              >
                üóëÔ∏è Eliminar
              </button>
            </ng-container>

            <!-- Botones en modo edici√≥n -->
            <ng-container *ngIf="modoEdicion">
              <button 
                type="submit" 
                class="btn btn-modern btn-save" 
                [disabled]="form.invalid"
                (click)="save()"
              >
                üíæ Guardar
              </button>
              <button type="button" class="btn btn-modern btn-cancel" (click)="cancelar()">
                ‚ùå Cancelar
              </button>
            </ng-container>
          </div>
        </div>
      </div>
    </div>