<div *ngIf="bordero">
  <h2>
    {{ bordero && bordero.id ? "Bordero N° " + bordero.id : "Nuevo bordero" }}
  </h2>

  <form #form="ngForm">
    <div class="form-group inline">
      <label for="date">Fecha:</label>
      <ngb-datepicker name="date" [(ngModel)]="borderoDate" [startDate]="borderoDate"></ngb-datepicker>
    </div>

    <div class="form-group">
      <label for="customer">Cliente:</label>
      <br />
      <input
        [(ngModel)]="bordero.customer"
        name="customer"
        placeholder="Cliente"
        class="form-control"
        required
        [ngbTypeahead]="searchCustomer"
        [editable]="false"
        [resultFormatter]="resultFormat"
        [inputFormatter]="inputFormat"
      />
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th>#</th>
            <th>Obra</th>
            <th>Audiencia</th>
            <th>
              <button (click)="addPerformance()" class="btn btn-success">
                Agregar
              </button>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let performance of bordero.performances; index as i">
            <td>{{ i }}</td>
            <td>
              <input
                [(ngModel)]="performance.play"
                name="performancePlay{{i}}"
                placeholder="Obra"
                class="form-control"
                required
                [ngbTypeahead]="searchPlay"
                [editable]="false"
                [resultFormatter]="resultFormat"
                [inputFormatter]="inputFormat"
              />
            </td>
            <td>
              <input
                name="audience{{i}}"
                [(ngModel)]="performance.audience"
                class="form-control"
              />
            </td>
            <td>
              <button
                (click)="removePerformance(performance)"
                class="btn btn-default"
              >
                <i class="fa fa-remove"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <button (click)="goBack()" class="btn btn-danger">Atrás</button>
    <button (click)="save()" [disabled]="!form.valid" class="btn btn-success">
      Guardar
    </button>
  </form>
</div>